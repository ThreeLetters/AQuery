/*
 Aquery: The world's best DOM wrapper

 Author: Andrews54757 & LegitSoulja
 License: MIT (https://github.com/ThreeLetters/AQuery/blob/master/LICENSE)
 Source: https://github.com/ThreeLetters/AQuery
 Build: v0.0.1
 Built on: 29/11/2017
*/

(function(h){function n(b,a,c,d){if(b.global)return!0}function H(b){b.global&&0===g.active++&&n(b,null,"ajaxStart")}function I(b,a){var c=a.context;if(!1===a.beforeSend.call(c,b,a)||!1===n(a,c,"ajaxBeforeSend",[b,a]))return!1;n(a,c,"ajaxSend",[b,a])}function z(b,a,c){var d=c.context;c.success.call(d,b,"success",a);n(c,d,"ajaxSuccess",[a,c,b]);q("success",a,c)}function u(b,a,c,d){var f=d.context;d.error.call(f,c,a,b);n(d,f,"ajaxError",[c,d,b]);q(a,c,d)}function q(b,a,c){var d=c.context;c.complete.call(d,
a,b);n(c,d,"ajaxComplete",[a,c]);c.global&&!--g.active&&n(c,null,"ajaxStop")}function p(){}function J(b){return b&&("text/html"==b?"html":"application/json"==b?"json":K.test(b)?"script":L.test(b)&&"xml")||"text"}function A(b){"object"===type(b.data)&&(b.data=M(b.data));!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=(b.url+"&"+b.data).replace(/[&?]{1,2}/,"?"))}function B(b,a,c,d){var f="array"===type(a),e;for(e in a){var k=a[e];d&&(e=c?d:d+"["+(f?"":e)+"]");!d&&f?b.add(k.name,k.value):(c?"array"===
type(k):"object"===type(k))?B(b,k,c,e):b.add(e,k)}}function M(b,a){var c=[];c.add=function(a,b){this.push(C(a)+"="+C(b))};B(c,b,a);return c.join("&").replace("%20","+")}function D(b){Array.prototype.slice.call(arguments,1).forEach(function(a){for(l in a)void 0!==a[l]&&(b[l]=a[l])});return b}function v(b){b.id||(b.id="aquery_id_"+N++);w[b.id]||(w[b.id]=E(null,b,null));return w[b.id]}function E(b,a,c){var d={},f={bindings:d,parent:b,current:a,name:c,listeners:[]},e="object"===typeof a&&("object"===
typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName);return new Proxy(a,{get:function(b,c){if("elementData"===c)return f;if("$"===c.charAt(0)){c=c.substr(1);if(e&&m[c])return m[c](f,!0);d[c]||(d[c]={isRefrence:!0,owner:a,attached:[],name:c,update:function(a){var b=this;this.owner[this.name]=a;this.attached.forEach(function(c){c.current[b.name]=a})}});return d[c]}if(e)return m[c](f,!1);if(a[c])return"object"===typeof a[c]?E(a,a[c],
c):a[c]},set:function(b,c,e){"$"===c.charAt(0)&&(c=c.substr(1));e&&e.isRefrence?d[c]!==e&&(d[c]&&(b=d[c].attached.indexOf(f),d[c].attached[b]=d[c].attached[d[c].attached.length-1],d[c].attached[b].pop()),e.attached.push(f),a[c]=e.owner[e.name],d[c]=e):d[c]?d[c].update(e):a[c]=e},has:function(a,b){},deleteProperty:function(b,c){if("$"===c.charAt(0)&&(c=c.substr(1),d[c])){if(d[c].owner===a)d[c].attached.forEach(function(a){a.bindings[c]=null}),d[c].attached=null;else{var e=d[c].attached.indexOf(f);
d[c].attached[e]=d[c].attached[d[c].attached.length-1];d[c].attached[e].pop()}d[c]=null}}})}function P(b,a){var c={nodes:b,wrappers:[],selector:a,selectorSplit:a.split(/[> ]/)};b.forEach(function(a,b){c.wrappers[b]=v(a)});return new Proxy(c,{get:function(a,f){if("length"===f)return b.length;var d=!1;"$"===f.charAt(0)&&(f=f.substr(1),d=!0);if("number"===typeof f&&c.nodes[f])return d?c.nodes[f]:c.wrappers[f];if(r[f])return r[f](c,d);if(1===b.length)return c.nodes[0][(d?"$":"")+f]},set:function(a,b,
c){}})}var m={},r={},x={},F={},w={},G=[],N=0;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var a=b.length;0<=--a&&b.item(a)!==this;);return-1<a});var Q=0,t=h.document,l,y,K=/^(?:text|application)\/javascript/i,L=/^(?:text|application)\/xml/i,
R=/^\s*$/,g=x.ajax=function(b){var a=D({},b||{});for(l in g.settings)void 0===a[l]&&(a[l]=g.settings[l]);H(a);a.crossDomain||(a.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(a.url)&&RegExp.$2!=h.location.host);var c=a.dataType;b=/=\?/.test(a.url);if("jsonp"==c||b)return b||(a.url=(a.url+"&callback=?").replace(/[&?]{1,2}/,"?")),g.JSONP(a);a.url||(a.url=h.location.toString());A(a);b=a.accepts[c];var d={},f=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:h.location.protocol,e=g.settings.xhr(),k;a.crossDomain||(d["X-Requested-With"]=
"XMLHttpRequest");b&&(d.Accept=b,-1<b.indexOf(",")&&(b=b.split(",",2)[0]),e.overrideMimeType&&e.overrideMimeType(b));if(a.contentType||a.data&&"GET"!=a.type.toUpperCase())d["Content-Type"]=a.contentType||"application/x-www-form-urlencoded";a.headers=D(d,a.headers||{});e.onreadystatechange=function(){if(4==e.readyState){clearTimeout(k);var b=!1;if(200<=e.status&&300>e.status||304==e.status||0==e.status&&"file:"==f){c=c||J(e.getResponseHeader("content-type"));var d=e.responseText;try{"script"==c?(0,eval)(d):
"xml"==c?d=e.responseXML:"json"==c&&(d=R.test(d)?null:JSON.parse(d))}catch(O){b=O}b?u(b,"parsererror",e,a):z(d,e,a)}else u(null,"error",e,a)}};e.open(a.type,a.url,"async"in a?a.async:!0);for(y in a.headers)e.setRequestHeader(y,a.headers[y]);if(!1===I(e,a))return e.abort(),!1;0<a.timeout&&(k=setTimeout(function(){e.onreadystatechange=p;e.abort();u(null,"timeout",e,a)},a.timeout));e.send(a.data?a.data:null);return e};g.active=0;g.JSONP=function(b){if(!("type"in b))return g(b);var a="jsonp"+ ++Q,c=t.createElement("script"),
d={abort:function(){a in h&&(h[a]=p);q("abort",d,b)}},f,e=t.getElementsByTagName("head")[0]||t.documentElement;b.error&&(c.onerror=function(){d.abort();b.error()});h[a]=function(c){clearTimeout(f);delete h[a];z(c,d,b)};A(b);c.src=b.url.replace(/=\?/,"="+a);e.insertBefore(c,e.firstChild);0<b.timeout&&(f=setTimeout(function(){d.abort();q("timeout",d,b)},b.timeout));return d};g.settings={type:"GET",beforeSend:p,success:p,error:p,complete:p,context:null,global:!0,xhr:function(){return new h.XMLHttpRequest},
accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0};g.get=function(b,a){return g({url:b,success:a})};g.post=function(b,a,c,d){"function"===type(a)&&(d=d||c,c=a,a=null);return g({type:"POST",url:b,data:a,success:c,dataType:d})};g.getJSON=function(b,a){return g({url:b,success:a,dataType:"json"})};var C=encodeURIComponent;m.append=m.appendChild=function(b,a){return function(a){a.elementData||
(a=v(a));var c=a.elementData;G.forEach(function(a){c.current.matches(a.selector)&&-1===c.listeners.indexOf(a)&&(c.current.addEventListener(a.type,a.listener,a.options),c.listeners.push(a))});b.current.appendChild(c.current)}};m.clone=function(b,a){return function(){}};m.on=m.addEventListener=function(b,a){return function(a,d,f){d._listenerData=d._listenerData||{type:a,listener:d,options:f};b.current.addEventListener(a,d,f);b.listeners.push(d._listenerData)}};r.on=r.addEventListener=function(b,a){return function(c,
d,f){var e=d._listenerData=d._listenerData||{selector:b.selector,type:c,listener:d,options:f};b.nodes.forEach(function(a,g){a.addEventListener(c,d,f);b.wrappers[g].listeners.push(e)});a&&G.push(e)}};var S=new Proxy(function(b){if(b){if("string"===typeof b){var a=Array.from(t.querySelectorAll(b));return P(a,b)}if("object"===typeof b)return v(b)}},{get:function(b,a){if(x[a])return x[a](a);if(F[a])return F[a]},set:function(b,a,c){}});h.AQuery=S;h.$||(h.$=h.AQuery)})(window);
