/*
 Aquery: The world's best DOM wrapper

 Author: Andrews54757 & LegitSoulja
 License: MIT (https://github.com/ThreeLetters/AQuery/blob/master/LICENSE)
 Source: https://github.com/ThreeLetters/AQuery
 Build: v0.0.1
 Built on: 29/11/2017
*/

(function(l){function p(a,b,c,d){if(a.global)return!0}function I(a){a.global&&0===h.active++&&p(a,null,"ajaxStart")}function J(a,b){var c=b.context;if(!1===b.beforeSend.call(c,a,b)||!1===p(b,c,"ajaxBeforeSend",[a,b]))return!1;p(b,c,"ajaxSend",[a,b])}function B(a,b,c){var d=c.context;c.success.call(d,a,"success",b);p(c,d,"ajaxSuccess",[b,c,a]);r("success",b,c)}function v(a,b,c,d){var g=d.context;d.error.call(g,c,b,a);p(d,g,"ajaxError",[c,d,a]);r(b,c,d)}function r(a,b,c){var d=c.context;c.complete.call(d,
b,a);p(c,d,"ajaxComplete",[b,c]);c.global&&!--h.active&&p(c,null,"ajaxStop")}function q(){}function K(a){return a&&("text/html"==a?"html":"application/json"==a?"json":L.test(a)?"script":M.test(a)&&"xml")||"text"}function C(a){"object"===type(a.data)&&(a.data=N(a.data));!a.data||a.type&&"GET"!=a.type.toUpperCase()||(a.url=(a.url+"&"+a.data).replace(/[&?]{1,2}/,"?"))}function D(a,b,c,d){var g="array"===type(b),f;for(f in b){var m=b[f];d&&(f=c?d:d+"["+(g?"":f)+"]");!d&&g?a.add(m.name,m.value):(c?"array"===
type(m):"object"===type(m))?D(a,m,c,f):a.add(f,m)}}function N(a,b){var c=[];c.add=function(a,b){this.push(E(a)+"="+E(b))};D(c,a,b);return c.join("&").replace("%20","+")}function F(a){Array.prototype.slice.call(arguments,1).forEach(function(b){for(n in b)void 0!==b[n]&&(a[n]=b[n])});return a}function w(a){a.id||(a.id="aquery_id_"+O++);x[a.id]||(x[a.id]=G(null,a,null));return x[a.id]}function G(a,b,c){var d={},g={bindings:d,parent:a,current:b,name:c,listeners:[]},f="object"===typeof b&&("object"===
typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&null!==b&&1===b.nodeType&&"string"===typeof b.nodeName);return new Proxy(b,{get:function(a,e){if("elementData"===e)return g;if("$"===e.charAt(0)){e=e.substr(1);if(f&&k[e])return k[e](g,!0,"get");d[e]||(d[e]={isRefrence:!0,owner:b,attached:[],name:e,update:function(a){var b=this;this.owner[this.name]=a;this.attached.forEach(function(d){d.current[b.name]=a})}});return d[e]}if(f&&k[e])return k[e](g,!1,"get");if(b[e])return"object"===
typeof b[e]?G(b,b[e],e):b[e]},set:function(a,e,c){"$"===e.charAt(0)&&(e=e.substr(1));if(f&&k[e])k[e](g,!0,"set",c);else c&&c.isRefrence?d[e]!==c&&(d[e]&&(a=d[e].attached.indexOf(g),d[e].attached[a]=d[e].attached[d[e].attached.length-1],d[e].attached[a].pop()),c.attached.push(g),b[e]=c.owner[c.name],d[e]=c):d[e]?d[e].update(c):b[e]=c},has:function(a,b){},deleteProperty:function(a,e){if("$"===e.charAt(0))if(e=e.substr(1),f&&k[e])k[e](g,!0,"delete");else{if(d[e]){if(d[e].owner===b)d[e].attached.forEach(function(a){a.bindings[e]=
null}),d[e].attached=null;else{var c=d[e].attached.indexOf(g);d[e].attached[c]=d[e].attached[d[e].attached.length-1];d[e].attached[c].pop()}d[e]=null}}else if(f&&k[e])k[e](g,!1,"delete")}})}function Q(a,b){var c={nodes:a,wrappers:[],selector:b,selectorSplit:b.split(/[> ]/),listeners:[]};a.forEach(function(a,b){c.wrappers[b]=w(a)});return new Proxy(c,{get:function(b,g){if("length"===g)return a.length;var d=!1;"$"===g.charAt(0)&&(g=g.substr(1),d=!0);if("number"===typeof g&&c.nodes[g])return d?c.nodes[g]:
c.wrappers[g];if(t[g])return t[g](c,d);if(1===a.length)return c.nodes[0][(d?"$":"")+g]},set:function(a,b,c){}})}var k={},t={},y={},H={},x={},z=[],O=0;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var b=a.length;0<=--b&&a.item(b)!==this;);
return-1<b});var R=0,u=l.document,n,A,L=/^(?:text|application)\/javascript/i,M=/^(?:text|application)\/xml/i,S=/^\s*$/,h=y.ajax=function(a){var b=F({},a||{});for(n in h.settings)void 0===b[n]&&(b[n]=h.settings[n]);I(b);b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!=l.location.host);var c=b.dataType;a=/=\?/.test(b.url);if("jsonp"==c||a)return a||(b.url=(b.url+"&callback=?").replace(/[&?]{1,2}/,"?")),h.JSONP(b);b.url||(b.url=l.location.toString());C(b);a=b.accepts[c];
var d={},g=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:l.location.protocol,f=h.settings.xhr(),m;b.crossDomain||(d["X-Requested-With"]="XMLHttpRequest");a&&(d.Accept=a,-1<a.indexOf(",")&&(a=a.split(",",2)[0]),f.overrideMimeType&&f.overrideMimeType(a));if(b.contentType||b.data&&"GET"!=b.type.toUpperCase())d["Content-Type"]=b.contentType||"application/x-www-form-urlencoded";b.headers=F(d,b.headers||{});f.onreadystatechange=function(){if(4==f.readyState){clearTimeout(m);var a=!1;if(200<=f.status&&300>f.status||
304==f.status||0==f.status&&"file:"==g){c=c||K(f.getResponseHeader("content-type"));var d=f.responseText;try{"script"==c?(0,eval)(d):"xml"==c?d=f.responseXML:"json"==c&&(d=S.test(d)?null:JSON.parse(d))}catch(P){a=P}a?v(a,"parsererror",f,b):B(d,f,b)}else v(null,"error",f,b)}};f.open(b.type,b.url,"async"in b?b.async:!0);for(A in b.headers)f.setRequestHeader(A,b.headers[A]);if(!1===J(f,b))return f.abort(),!1;0<b.timeout&&(m=setTimeout(function(){f.onreadystatechange=q;f.abort();v(null,"timeout",f,b)},
b.timeout));f.send(b.data?b.data:null);return f};h.active=0;h.JSONP=function(a){if(!("type"in a))return h(a);var b="jsonp"+ ++R,c=u.createElement("script"),d={abort:function(){b in l&&(l[b]=q);r("abort",d,a)}},g,f=u.getElementsByTagName("head")[0]||u.documentElement;a.error&&(c.onerror=function(){d.abort();a.error()});l[b]=function(c){clearTimeout(g);delete l[b];B(c,d,a)};C(a);c.src=a.url.replace(/=\?/,"="+b);f.insertBefore(c,f.firstChild);0<a.timeout&&(g=setTimeout(function(){d.abort();r("timeout",
d,a)},a.timeout));return d};h.settings={type:"GET",beforeSend:q,success:q,error:q,complete:q,context:null,global:!0,xhr:function(){return new l.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0};h.get=function(a,b){return h({url:a,success:b})};h.post=function(a,b,c,d){"function"===type(b)&&(d=d||c,c=b,b=null);return h({type:"POST",url:a,data:b,success:c,dataType:d})};
h.getJSON=function(a,b){return h({url:a,success:b,dataType:"json"})};var E=encodeURIComponent;k.append=k.appendChild=function(a,b){return function(b){b.elementData||(b=w(b));var d=b.elementData;z.forEach(function(a){d.current.matches(a.selector)&&-1===d.listeners.indexOf(a)&&(d.current.addEventListener(a.type,a.listener,a.options),d.listeners.push(a))});a.current.appendChild(d.current)}};k.clone=function(a,b){return function(){}};k.on=k.addEventListener=function(a,b,c){if("delete"===c)a.listeners.forEach(function(b){a.current.removeEventListener(b.type,
b.listener)}),a.listeners=[];else return new Proxy(function(b,c,f){c._listenerData=c._listenerData||{type:b,listener:c,options:f};-1===a.listeners.indexOf(c._listenerData)&&(a.current.addEventListener(b,c,f),a.listeners.push(c._listenerData))},{get:function(b,c){if("length"===c)return a.listeners.length;if("number"===typeof c)return a.listeners[c].listener;var d=[];a.listeners.forEach(function(a){a.type===c&&d.push(a.listener)});return new Proxy(d,{deleteProperty:function(b,c){if("number"===typeof c){var e=
d[c];if(e){d.splice(c,1);var f=a.listeners.indexOf(e);-1!==e&&a.listeners.splice(f,1);a.current.removeEventListener(e.type,e.listener)}}}})},deleteProperty:function(b,c){if("number"===typeof c){var d=a.listeners[c];d&&(a.listeners.splice(c,1),a.current.removeEventListener(d.type,d.listener))}else a.listeners=a.listeners.filter(function(b){return b.type===c?(a.current.removeEventListener(b.type,b.listener),!1):!0})}})};t.on=t.addEventListener=function(a,b,c){if("delete"===c)a.listeners.forEach(function(b){a.wrappers.forEach(function(a){a=
a.elementData;var c=a.listeners.indexOf(b);-1!==c&&(a.listeners.splice(c,1),a.current.removeEventListener(b.type,b.listener))})}),a.listeners=[];else return new Proxy(function(c,g,f){var d=g._listenerData=g._listenerData||{selector:a.selector,type:c,listener:g,options:f};-1===a.listeners.indexOf(d)&&a.listeners.push(d);a.nodes.forEach(function(b,m){var e=a.wrappers[m].elementData;-1===e.listeners.indexOf(d)&&(b.addEventListener(c,g,f),e.listeners.push(d))});b&&-1===z.indexOf(d)&&z.push(d)},{get:function(b,
c){if("length"===c)return a.listeners.length;if("number"===typeof c)return a.listeners[c].listener;var d=[];a.listeners.forEach(function(a){a.type===c&&d.push(a.listener)});return new Proxy(d,{deleteProperty:function(b,c){if("number"===typeof c){var e=d[c];if(e){d.splice(c,1);var f=a.listeners.indexOf(e);-1!==e&&a.listeners.splice(f,1);a.wrappers.forEach(function(a){a=a.elementData;var b=a.listeners.indexOf(e);-1!==b&&(a.current.removeEventListener(e.type,e.listener),a.listeners.splice(b,1))})}}}})},
deleteProperty:function(b,c){if("number"===typeof c){var d=a.listeners[c];d&&(a.listeners.splice(c,1),a.wrappers.forEach(function(a){a=a.elementData;var b=a.listeners.indexOf(d);-1!==b&&(a.current.removeEventListener(d.type,d.listener),a.listeners.splice(b,1))}))}else elementData.listeners=elementData.listeners.filter(function(b){return b.type===c?(elementData.current.removeEventListener(b.type,b.listener),a.wrappers.forEach(function(a){a=a.elementData;var c=a.listeners.indexOf(b);-1!==c&&(a.current.removeEventListener(b.type,
b.listener),a.listeners.splice(c,1))}),!1):!0})}})};var T=new Proxy(function(a){if(a){if("string"===typeof a){var b=Array.from(u.querySelectorAll(a));return Q(b,a)}if("object"===typeof a)return w(a)}},{get:function(a,b){if(y[b])return y[b](b);if(H[b])return H[b]},set:function(a,b,c){}});l.AQuery=T;l.$||(l.$=l.AQuery)})(window);
