/*
 Aquery: The world's best DOM wrapper

 Author: Andrews54757 & LegitSoulja
 License: MIT (https://github.com/ThreeLetters/AQuery/blob/master/LICENSE)
 Source: https://github.com/ThreeLetters/AQuery
 Build: v0.0.1
 Built on: 29/11/2017
*/

(function(m){function t(b,c,a,d){if(b.global)return!0}function K(b){b.global&&0===k.active++&&t(b,null,"ajaxStart")}function L(b,c){var a=c.context;if(!1===c.beforeSend.call(a,b,c)||!1===t(c,a,"ajaxBeforeSend",[b,c]))return!1;t(c,a,"ajaxSend",[b,c])}function C(b,c,a){var d=a.context;a.success.call(d,b,"success",c);t(a,d,"ajaxSuccess",[c,a,b]);w("success",c,a)}function z(b,c,a,d){var e=d.context;d.error.call(e,a,c,b);t(d,e,"ajaxError",[a,d,b]);w(c,a,d)}function w(b,c,a){var d=a.context;a.complete.call(d,
c,b);t(a,d,"ajaxComplete",[c,a]);a.global&&!--k.active&&t(a,null,"ajaxStop")}function u(){}function M(b){return b&&("text/html"==b?"html":"application/json"==b?"json":N.test(b)?"script":O.test(b)&&"xml")||"text"}function D(b){"object"===type(b.data)&&(b.data=P(b.data));!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=(b.url+"&"+b.data).replace(/[&?]{1,2}/,"?"))}function E(b,c,a,d){var e="array"===type(c),g;for(g in c){var n=c[g];d&&(g=a?d:d+"["+(e?"":g)+"]");!d&&e?b.add(n.name,n.value):(a?"array"===
type(n):"object"===type(n))?E(b,n,a,g):b.add(g,n)}}function P(b,c){var a=[];a.add=function(b,a){this.push(F(b)+"="+F(a))};E(a,b,c);return a.join("&").replace("%20","+")}function G(b){Array.prototype.slice.call(arguments,1).forEach(function(c){for(r in c)void 0!==c[r]&&(b[r]=c[r])});return b}function H(b,c,a){var d={},e={bindings:d,parent:b,current:c,name:a,listeners:[]},g="object"===typeof c&&("object"===typeof HTMLElement?c instanceof HTMLElement:c&&"object"===typeof c&&null!==c&&1===c.nodeType&&
"string"===typeof c.nodeName);return new Proxy(c,{get:function(b,a){if("elementData"===a)return e;if("$"===a.charAt(0)){a=a.substr(1);if(g&&l[a])return l[a](e,!0,"get");d[a]||(d[a]={isRefrence:!0,owner:c,attached:[],name:a,update:function(b){var a=this;this.owner[this.name]=b;this.attached.forEach(function(c){c.current[a.name]=b})}});return d[a]}if(g&&l[a])return l[a](e,!1,"get");if(c[a])return"object"===typeof c[a]?H(c,c[a],a):c[a]},set:function(b,a,h){"$"===a.charAt(0)&&(a=a.substr(1));if(g&&l[a])l[a](e,
!0,"set",h);else h&&h.isRefrence?d[a]!==h&&(d[a]&&(b=d[a].attached.indexOf(e),d[a].attached[b]=d[a].attached[d[a].attached.length-1],d[a].attached[b].pop()),h.attached.push(e),c[a]=h.owner[h.name],d[a]=h):d[a]?d[a].update(h):c[a]=h},has:function(b,a){},deleteProperty:function(b,a){if("$"===a.charAt(0))if(a=a.substr(1),g&&l[a])l[a](e,!0,"delete");else{if(d[a]){if(d[a].owner===c)d[a].attached.forEach(function(b){b.bindings[a]=null}),d[a].attached=null;else{var f=d[a].attached.indexOf(e);d[a].attached[f]=
d[a].attached[d[a].attached.length-1];d[a].attached[f].pop()}d[a]=null}}else if(g&&l[a])l[a](e,!1,"delete")}})}function x(b){b.id||(b.id="aquery_id_"+R++);A[b.id]||(A[b.id]=H(null,b,null));return A[b.id]}function S(b,c){var a={nodes:b,wrappers:[],selector:c,selectorSplit:c.split(/[> ]/),listeners:[]};b.forEach(function(b,c){a.wrappers[c]=x(b)});return new Proxy(a,{get:function(c,e){if("length"===e)return b.length;var d=!1;"$"===e.charAt(0)&&(e=e.substr(1),d=!0);if("number"===typeof e&&a.nodes[e])return d?
a.nodes[e]:a.wrappers[e];if(y[e])return y[e](a,d);if(1===b.length)return a.nodes[0][(d?"$":"")+e]},set:function(a,b,c){}})}var l={},y={},p={},I={},A={},q=[],R=0;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var c=b.length;0<=--c&&b.item(c)!==
this;);return-1<c});var T=function(b,c,a,d){var e=void 0,g=!1;if(a){e=c;var n=a;g=d}else n=c,g=a;try{var f=m.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open(e?"POST":"GET",b+(g?"?"+Date.now():""));f.onreadystatechange=function(){4==f.readyState&&(200===f.status?n(void 0,f,f.responseText):n(!0,f,!1))};if(e){f.setRequestHeader("Content-type","application/x-www-form-urlencoded");b=[];for(var h in e)b.push(encodeURIComponent(h)+"="+encodeURIComponent(e[h]));e=b.join("&")}f.send(e)}catch(Q){n(Q)}},
U=0,v=m.document,r,B,N=/^(?:text|application)\/javascript/i,O=/^(?:text|application)\/xml/i,V=/^\s*$/,k=function(b,c){if(c)return T.apply(null,arguments);var a=G({},b||{});for(r in k.settings)void 0===a[r]&&(a[r]=k.settings[r]);K(a);a.crossDomain||(a.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(a.url)&&RegExp.$2!=m.location.host);var d=a.dataType,e=/=\?/.test(a.url);if("jsonp"==d||e)return e||(a.url=(a.url+"&callback=?").replace(/[&?]{1,2}/,"?")),k.JSONP(a);a.url||(a.url=m.location.toString());D(a);
e=a.accepts[d];var g={},n=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:m.location.protocol,f=k.settings.xhr(),h;a.crossDomain||(g["X-Requested-With"]="XMLHttpRequest");e&&(g.Accept=e,-1<e.indexOf(",")&&(e=e.split(",",2)[0]),f.overrideMimeType&&f.overrideMimeType(e));if(a.contentType||a.data&&"GET"!=a.type.toUpperCase())g["Content-Type"]=a.contentType||"application/x-www-form-urlencoded";a.headers=G(g,a.headers||{});f.onreadystatechange=function(){if(4==f.readyState){clearTimeout(h);var b=!1;if(200<=f.status&&
300>f.status||304==f.status||0==f.status&&"file:"==n){d=d||M(f.getResponseHeader("content-type"));var c=f.responseText;try{"script"==d?(0,eval)(c):"xml"==d?c=f.responseXML:"json"==d&&(c=V.test(c)?null:JSON.parse(c))}catch(W){b=W}b?z(b,"parsererror",f,a):C(c,f,a)}else z(null,"error",f,a)}};f.open(a.type,a.url,"async"in a?a.async:!0);for(B in a.headers)f.setRequestHeader(B,a.headers[B]);if(!1===L(f,a))return f.abort(),!1;0<a.timeout&&(h=setTimeout(function(){f.onreadystatechange=u;f.abort();z(null,
"timeout",f,a)},a.timeout));f.send(a.data?a.data:null);return f};k.active=0;k.JSONP=function(b){if(!("type"in b))return k(b);var c="jsonp"+ ++U,a=v.createElement("script"),d={abort:function(){c in m&&(m[c]=u);w("abort",d,b)}},e,g=v.getElementsByTagName("head")[0]||v.documentElement;b.error&&(a.onerror=function(){d.abort();b.error()});m[c]=function(a){clearTimeout(e);delete m[c];C(a,d,b)};D(b);a.src=b.url.replace(/=\?/,"="+c);g.insertBefore(a,g.firstChild);0<b.timeout&&(e=setTimeout(function(){d.abort();
w("timeout",d,b)},b.timeout));return d};k.settings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new m.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0};k.get=function(b,c){return k({url:b,success:c})};k.post=function(b,c,a,d){"function"===type(c)&&(d=d||a,a=c,c=null);return k({type:"POST",url:b,data:c,success:a,
dataType:d})};k.getJSON=function(b,c){return k({url:b,success:c,dataType:"json"})};var F=encodeURIComponent;p.ajax=function(){return k};l.append=l.appendChild=function(b,c){return function(a){a.elementData||(a=x(a));var c=a.elementData;q.forEach(function(a){c.current.matches(a.selector)&&-1===c.listeners.indexOf(a)&&(c.current.addEventListener(a.type,a.listener,a.options),c.listeners.push(a))});b.current.appendChild(c.current)}};p.append=p.appendChild=function(){return function(b){b.elementData||
(b=x(b));var c=b.elementData;q.forEach(function(a){c.current.matches(a.selector)&&-1===c.listeners.indexOf(a)&&(c.current.addEventListener(a.type,a.listener,a.options),c.listeners.push(a))});v.body.appendChild(c.current)}};l.clone=function(b,c){return function(a){var c=b.current.cloneNode(!0),e=J(c);!1!==a&&b.listeners.forEach(function(a){e.elementData.listeners.push(a);e.elementData.current.addEventListener(a.type,a.listener,a.options)});return e}};l.on=l.addEventListener=function(b,c,a){if("delete"===
a)b.listeners.forEach(function(a){b.current.removeEventListener(a.type,a.listener)}),b.listeners=[];else return new Proxy(function(a,c,g){c._listenerData=c._listenerData||{type:a,listener:c,options:g};-1===b.listeners.indexOf(c._listenerData)&&(b.current.addEventListener(a,c,g),b.listeners.push(c._listenerData))},{get:function(a,c){if("length"===c)return b.listeners.length;if("number"===typeof c)return b.listeners[c].listener;var d=[];b.listeners.forEach(function(a){a.type===c&&d.push(a.listener)});
return new Proxy(d,{deleteProperty:function(a,c){if("number"===typeof c){var e=d[c];if(e){d.splice(c,1);var f=b.listeners.indexOf(e);-1!==e&&b.listeners.splice(f,1);b.current.removeEventListener(e.type,e.listener)}}}})},deleteProperty:function(a,c){if("number"===typeof c){var d=b.listeners[c];d&&(b.listeners.splice(c,1),b.current.removeEventListener(d.type,d.listener))}else b.listeners=b.listeners.filter(function(a){return a.type===c?(b.current.removeEventListener(a.type,a.listener),!1):!0})}})};
y.on=y.addEventListener=function(b,c,a){if("delete"===a)b.listeners.forEach(function(a){b.wrappers.forEach(function(b){b=b.elementData;var c=b.listeners.indexOf(a);-1!==c&&(b.listeners.splice(c,1),b.current.removeEventListener(a.type,a.listener))})}),b.listeners=[];else return new Proxy(function(a,e,g){var d=e._listenerData=e._listenerData||{selector:b.selector,type:a,listener:e,options:g};-1===b.listeners.indexOf(d)&&b.listeners.push(d);b.nodes.forEach(function(c,h){var f=b.wrappers[h].elementData;
-1===f.listeners.indexOf(d)&&(c.addEventListener(a,e,g),f.listeners.push(d))});c&&!d.isRefrenceEvent&&(q.push(d),d.isRefrenceEvent=!0)},{get:function(a,c){if("length"===c)return b.listeners.length;if("number"===typeof c)return b.listeners[c].listener;var d=[];b.listeners.forEach(function(a){a.type===c&&d.push(a.listener)});return new Proxy(d,{deleteProperty:function(a,c){if("number"===typeof c){var e=d[c];if(e){d.splice(c,1);var f=b.listeners.indexOf(e);-1!==e&&b.listeners.splice(f,1);e.isRefrenceEvent&&
(f=q.indexOf(e),q.splice(f,1),e.isRefrenceEvent=!1);b.wrappers.forEach(function(a){a=a.elementData;var b=a.listeners.indexOf(e);-1!==b&&(a.current.removeEventListener(e.type,e.listener),a.listeners.splice(b,1))})}}}})},deleteProperty:function(a,c){if("number"===typeof c){var d=b.listeners[c];if(d){b.listeners.splice(c,1);if(d.isRefrenceEvent){var e=q.indexOf(d);q.splice(e,1);d.isRefrenceEvent=!1}b.wrappers.forEach(function(a){a=a.elementData;var b=a.listeners.indexOf(d);-1!==b&&(a.current.removeEventListener(d.type,
d.listener),a.listeners.splice(b,1))})}}else b.listeners=b.listeners.filter(function(a){if(a.type===c){if(a.isRefrenceEvent){var d=q.indexOf(a);q.splice(d,1);a.isRefrenceEvent=!1}elementData.current.removeEventListener(a.type,a.listener);b.wrappers.forEach(function(b){b=b.elementData;var c=b.listeners.indexOf(a);-1!==c&&(b.current.removeEventListener(a.type,a.listener),b.listeners.splice(c,1))});return!1}return!0})}})};var J=function(){return new Proxy(function(b){if(b){if("string"===typeof b){var c=
Array.from(v.querySelectorAll(b));return S(c,b)}if("object"===typeof b)return x(b)}},{get:function(b,c){var a=!1;"$"===c.charAt(0)&&(a=!0,c=c.substr(1));if(p[c])return p[c](a,"get");if(I[c])return I[c]},set:function(b,c,a){b=!1;"$"===c.charAt(0)&&(b=!0,c=c.substr(1));if(p[c])return p[c](b,"set",a)},deleteProperty:function(b,c){var a=!1;"$"===c.charAt(0)&&(a=!0,c=c.substr(1));if(p[c])return p[c](a,"delete",value)}})}();m.AQuery=J;m.$||(m.$=m.AQuery)})(window);
