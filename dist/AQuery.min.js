/*
 Aquery: The world's best DOM wrapper

 Author: Andrews54757 & LegitSoulja
 License: MIT (https://github.com/ThreeLetters/AQuery/blob/master/LICENSE)
 Source: https://github.com/ThreeLetters/AQuery
 Build: v0.0.1
 Built on: 28/11/2017
*/

(function(g){function l(b,a,c,d){if(b.global)return!0}function G(b){b.global&&0===ajax.active++&&l(b,null,"ajaxStart")}function H(b,a){var c=a.context;if(!1===a.beforeSend.call(c,b,a)||!1===l(a,c,"ajaxBeforeSend",[b,a]))return!1;l(a,c,"ajaxSend",[b,a])}function x(b,a,c){var d=c.context;c.success.call(d,b,"success",a);l(c,d,"ajaxSuccess",[a,c,b]);p("success",a,c)}function t(b,a,c,d){var e=d.context;d.error.call(e,c,a,b);l(d,e,"ajaxError",[c,d,b]);p(a,c,d)}function p(b,a,c){var d=c.context;c.complete.call(d,
a,b);l(c,d,"ajaxComplete",[a,c]);c.global&&!--ajax.active&&l(c,null,"ajaxStop")}function n(){}function I(b){return b&&("text/html"==b?"html":"application/json"==b?"json":J.test(b)?"script":K.test(b)&&"xml")||"text"}function y(b){"object"===type(b.data)&&(b.data=L(b.data));!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=(b.url+"&"+b.data).replace(/[&?]{1,2}/,"?"))}function z(b,a,c,d){var e="array"===type(a),f;for(f in a){var h=a[f];d&&(f=c?d:d+"["+(e?"":f)+"]");!d&&e?b.add(h.name,h.value):(c?
"array"===type(h):"object"===type(h))?z(b,h,c,f):b.add(f,h)}}function L(b,a){var c=[];c.add=function(a,b){this.push(A(a)+"="+A(b))};z(c,b,a);return c.join("&").replace("%20","+")}function B(b){Array.prototype.slice.call(arguments,1).forEach(function(a){for(k in a)void 0!==a[k]&&(b[k]=a[k])});return b}function C(b){b.id||(b.id="aquery_id_"+M++);u[b.id]||(u[b.id]=D(null,b,null,null));return u[b.id]}function D(b,a,c,d){var e={},f={bindings:e,parentBindings:d,parent:b,current:a,name:c},h="object"===typeof a&&
("object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName);return new Proxy(a,{get:function(b,c){if("elementData"===c)return f;if("$"===c.charAt(0)){c=c.substr(1);if(h&&m[c])return m[c](f,!0);e[c]||(e[c]={isRefrence:!0,owner:a,attached:[],name:c,update:function(a){var b=this;this.owner[this.name]=a;this.attached.forEach(function(c){c.current[b.name]=a})}});return e[c]}if(h)return m[c](f,!1);if(a[c])return"object"===typeof a[c]?
D(a,a[c],c,e):a[c]},set:function(b,c,d){"$"===c.charAt(0)&&(c=c.substr(1));d&&d.isRefrence?e[c]!==d&&(e[c]&&(b=e[c].attached.indexOf(f),e[c].attached[b]=e[c].attached[e[c].attached.length-1],e[c].attached[b].pop()),d.attached.push(f),a[c]=d.owner[d.name],e[c]=d):e[c]?e[c].update(d):a[c]=d},has:function(a,b){},deleteProperty:function(b,c){if("$"===c.charAt(0)&&(c=c.substr(1),e[c])){if(e[c].owner===a)e[c].attached.forEach(function(a){a.bindings[c]=null}),e[c].attached=null;else{var d=e[c].attached.indexOf(f);
e[c].attached[d]=e[c].attached[e[c].attached.length-1];e[c].attached[d].pop()}e[c]=null}}})}function O(b,a){var c={nodes:b,selector:a,selectorSplit:a.split(/[> ]/)};return new Proxy(c,{get:function(a,e){if("length"===e)return b.length;if("number"===typeof e&&c.nodes[e])return C(c.nodes[e]);var d=!1;"$"===e.charAt(0)&&(e=e.substr(1),d=!0);if(q[e])return q[e](c,d);if(1===b.length)return c.nodes[0][(d?"$":"")+e]},set:function(a,c,b){}})}var m={},q={},v={},E={},u={},F=[],M=0;Element.prototype.matches||
(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var a=b.length;0<=--a&&b.item(a)!==this;);return-1<a});var P=0,r=g.document,k,w,J=/^(?:text|application)\/javascript/i,K=/^(?:text|application)\/xml/i,Q=/^\s*$/;v.ajax=function(b){var a=B({},b||{});for(k in ajax.settings)void 0===
a[k]&&(a[k]=ajax.settings[k]);G(a);a.crossDomain||(a.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(a.url)&&RegExp.$2!=g.location.host);var c=a.dataType;b=/=\?/.test(a.url);if("jsonp"==c||b)return b||(a.url=(a.url+"&callback=?").replace(/[&?]{1,2}/,"?")),ajax.JSONP(a);a.url||(a.url=g.location.toString());y(a);b=a.accepts[c];var d={},e=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:g.location.protocol,f=ajax.settings.xhr(),h;a.crossDomain||(d["X-Requested-With"]="XMLHttpRequest");b&&(d.Accept=b,-1<b.indexOf(",")&&
(b=b.split(",",2)[0]),f.overrideMimeType&&f.overrideMimeType(b));if(a.contentType||a.data&&"GET"!=a.type.toUpperCase())d["Content-Type"]=a.contentType||"application/x-www-form-urlencoded";a.headers=B(d,a.headers||{});f.onreadystatechange=function(){if(4==f.readyState){clearTimeout(h);var b=!1;if(200<=f.status&&300>f.status||304==f.status||0==f.status&&"file:"==e){c=c||I(f.getResponseHeader("content-type"));var d=f.responseText;try{"script"==c?(0,eval)(d):"xml"==c?d=f.responseXML:"json"==c&&(d=Q.test(d)?
null:JSON.parse(d))}catch(N){b=N}b?t(b,"parsererror",f,a):x(d,f,a)}else t(null,"error",f,a)}};f.open(a.type,a.url,"async"in a?a.async:!0);for(w in a.headers)f.setRequestHeader(w,a.headers[w]);if(!1===H(f,a))return f.abort(),!1;0<a.timeout&&(h=setTimeout(function(){f.onreadystatechange=n;f.abort();t(null,"timeout",f,a)},a.timeout));f.send(a.data?a.data:null);return f};ajax.active=0;ajax.JSONP=function(b){if(!("type"in b))return ajax(b);var a="jsonp"+ ++P,c=r.createElement("script"),d={abort:function(){a in
g&&(g[a]=n);p("abort",d,b)}},e,f=r.getElementsByTagName("head")[0]||r.documentElement;b.error&&(c.onerror=function(){d.abort();b.error()});g[a]=function(c){clearTimeout(e);delete g[a];x(c,d,b)};y(b);c.src=b.url.replace(/=\?/,"="+a);f.insertBefore(c,f.firstChild);0<b.timeout&&(e=setTimeout(function(){d.abort();p("timeout",d,b)},b.timeout));return d};ajax.settings={type:"GET",beforeSend:n,success:n,error:n,complete:n,context:null,global:!0,xhr:function(){return new g.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",
json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0};ajax.get=function(b,a){return ajax({url:b,success:a})};ajax.post=function(b,a,c,d){"function"===type(a)&&(d=d||c,c=a,a=null);return ajax({type:"POST",url:b,data:a,success:c,dataType:d})};ajax.getJSON=function(b,a){return ajax({url:b,success:a,dataType:"json"})};var A=encodeURIComponent;m.append=m.appendChild=function(b,a){return function(a){a.elementData&&(a=a.elementData.current);
F.forEach(function(b){a.matches(b.selector)&&a.addEventListener(b.type,b.listener,b.options)});b.current.appendChild(a)}};m.on=m.addEventListener=function(b,a){return function(a,d,e){b.current.addEventListener(a,d,e)}};q.on=q.addEventListener=function(b,a){return a?function(a,d,e){b.nodes.forEach(function(b){b.addEventListener(a,d,e)});F.push({selector:b.selector,type:a,listener:d,options:e})}:function(a,d,e){b.nodes.forEach(function(b){b.addEventListener(a,d,e)})}};var R=new Proxy(function(b){if(b){if("string"===
typeof b){var a=Array.from(r.querySelectorAll(b));return O(a,b)}if("object"===typeof b)return C(b)}},{get:function(b,a){if(v[a])return v[a](a);if(E[a])return E[a]},set:function(b,a,c){}});g.AQuery=R;g.$||(g.$=g.AQuery)})(window);
