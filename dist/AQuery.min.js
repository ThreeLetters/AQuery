/*
 Aquery: The world's best DOM wrapper

 Author: Andrews54757 & LegitSoulja
 License: MIT (https://github.com/ThreeLetters/AQuery/blob/master/LICENSE)
 Source: https://github.com/ThreeLetters/AQuery
 Build: v0.0.1
 Built on: 29/11/2017
*/

(function(m){function t(a,c,b,d){if(a.global)return!0}function M(a){a.global&&0===l.active++&&t(a,null,"ajaxStart")}function N(a,c){var b=c.context;if(!1===c.beforeSend.call(b,a,c)||!1===t(c,b,"ajaxBeforeSend",[a,c]))return!1;t(c,b,"ajaxSend",[a,c])}function E(a,c,b){var d=b.context;b.success.call(d,a,"success",c);t(b,d,"ajaxSuccess",[c,b,a]);x("success",c,b)}function A(a,c,b,d){var e=d.context;d.error.call(e,b,c,a);t(d,e,"ajaxError",[b,d,a]);x(c,b,d)}function x(a,c,b){var d=b.context;b.complete.call(d,
c,a);t(b,d,"ajaxComplete",[c,b]);b.global&&!--l.active&&t(b,null,"ajaxStop")}function v(){}function O(a){return a&&("text/html"==a?"html":"application/json"==a?"json":P.test(a)?"script":Q.test(a)&&"xml")||"text"}function F(a){"object"===type(a.data)&&(a.data=R(a.data));!a.data||a.type&&"GET"!=a.type.toUpperCase()||(a.url=(a.url+"&"+a.data).replace(/[&?]{1,2}/,"?"))}function G(a,c,b,d){var e="array"===type(c),g;for(g in c){var n=c[g];d&&(g=b?d:d+"["+(e?"":g)+"]");!d&&e?a.add(n.name,n.value):(b?"array"===
type(n):"object"===type(n))?G(a,n,b,g):a.add(g,n)}}function R(a,c){var b=[];b.add=function(a,b){this.push(H(a)+"="+H(b))};G(b,a,c);return b.join("&").replace("%20","+")}function I(a){Array.prototype.slice.call(arguments,1).forEach(function(c){for(r in c)void 0!==c[r]&&(a[r]=c[r])});return a}function y(a){"none"===a.current.style.display&&(a.current.style.display=a.defaultDisplay||"")}function B(a){"none"!==a.current.style.display&&(a.defaultDisplay=a.current.style.display,a.current.style.display=
"none")}function J(a,c,b){var d={},e={bindings:d,parent:a,current:c,name:b,listeners:[]},g="object"===typeof c&&("object"===typeof HTMLElement?c instanceof HTMLElement:c&&"object"===typeof c&&null!==c&&1===c.nodeType&&"string"===typeof c.nodeName);return new Proxy(c,{get:function(a,b){if("elementData"===b)return e;if("$"===b.charAt(0)){b=b.substr(1);if(g&&h[b])return h[b](e,!0,"get");d[b]||(d[b]={isRefrence:!0,owner:c,attached:[],name:b,update:function(a){var b=this;this.owner[this.name]=a;this.attached.forEach(function(c){c.current[b.name]=
a})}});return d[b]}if(g&&h[b])return h[b](e,!1,"get");if(c[b])return"object"===typeof c[b]?J(c,c[b],b):c[b]},set:function(a,b,k){"$"===b.charAt(0)&&(b=b.substr(1));if(g&&h[b])h[b](e,!0,"set",k);else k&&k.isRefrence?d[b]!==k&&(d[b]&&(a=d[b].attached.indexOf(e),d[b].attached[a]=d[b].attached[d[b].attached.length-1],d[b].attached[a].pop()),k.attached.push(e),c[b]=k.owner[k.name],d[b]=k):d[b]?d[b].update(k):c[b]=k},has:function(a,b){},deleteProperty:function(a,b){if("$"===b.charAt(0))if(b=b.substr(1),
g&&h[b])h[b](e,!0,"delete");else{if(d[b]){if(d[b].owner===c)d[b].attached.forEach(function(a){a.bindings[b]=null}),d[b].attached=null;else{var f=d[b].attached.indexOf(e);d[b].attached[f]=d[b].attached[d[b].attached.length-1];d[b].attached[f].pop()}d[b]=null}}else if(g&&h[b])h[b](e,!1,"delete")}})}function z(a){a.id||(a.id="aquery_id_"+T++);C[a.id]||(C[a.id]=J(null,a,null));return C[a.id]}function U(a,c){var b={nodes:a,wrappers:[],selector:c,selectorSplit:c.split(/[> ]/),listeners:[]};a.forEach(function(a,
c){b.wrappers[c]=z(a)});return new Proxy(b,{get:function(c,e){if("length"===e)return a.length;var d=!1;"$"===e.charAt(0)&&(e=e.substr(1),d=!0);if("number"===typeof e&&b.nodes[e])return d?b.nodes[e]:b.wrappers[e];if(u[e])return u[e](b,d);if(1===a.length)return b.nodes[0][(d?"$":"")+e]},set:function(a,b,c){}})}var h={},u={},p={},K={},C={},q=[],T=0;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||
Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var c=a.length;0<=--c&&a.item(c)!==this;);return-1<c});var V=function(a,c,b,d){var e=void 0,g=!1;if(b){e=c;var n=b;g=d}else n=c,g=b;try{var f=m.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open(e?"POST":"GET",a+(g?"?"+Date.now():""));f.onreadystatechange=function(){4==f.readyState&&(200===f.status?n(void 0,f,f.responseText):
n(!0,f,!1))};if(e){f.setRequestHeader("Content-type","application/x-www-form-urlencoded");a=[];for(var k in e)a.push(encodeURIComponent(k)+"="+encodeURIComponent(e[k]));e=a.join("&")}f.send(e)}catch(S){n(S)}},W=0,w=m.document,r,D,P=/^(?:text|application)\/javascript/i,Q=/^(?:text|application)\/xml/i,X=/^\s*$/,l=function(a,c){if(c)return V.apply(null,arguments);var b=I({},a||{});for(r in l.settings)void 0===b[r]&&(b[r]=l.settings[r]);M(b);b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&
RegExp.$2!=m.location.host);var d=b.dataType,e=/=\?/.test(b.url);if("jsonp"==d||e)return e||(b.url=(b.url+"&callback=?").replace(/[&?]{1,2}/,"?")),l.JSONP(b);b.url||(b.url=m.location.toString());F(b);e=b.accepts[d];var g={},n=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:m.location.protocol,f=l.settings.xhr(),k;b.crossDomain||(g["X-Requested-With"]="XMLHttpRequest");e&&(g.Accept=e,-1<e.indexOf(",")&&(e=e.split(",",2)[0]),f.overrideMimeType&&f.overrideMimeType(e));if(b.contentType||b.data&&"GET"!=b.type.toUpperCase())g["Content-Type"]=
b.contentType||"application/x-www-form-urlencoded";b.headers=I(g,b.headers||{});f.onreadystatechange=function(){if(4==f.readyState){clearTimeout(k);var a=!1;if(200<=f.status&&300>f.status||304==f.status||0==f.status&&"file:"==n){d=d||O(f.getResponseHeader("content-type"));var c=f.responseText;try{"script"==d?(0,eval)(c):"xml"==d?c=f.responseXML:"json"==d&&(c=X.test(c)?null:JSON.parse(c))}catch(Y){a=Y}a?A(a,"parsererror",f,b):E(c,f,b)}else A(null,"error",f,b)}};f.open(b.type,b.url,"async"in b?b.async:
!0);for(D in b.headers)f.setRequestHeader(D,b.headers[D]);if(!1===N(f,b))return f.abort(),!1;0<b.timeout&&(k=setTimeout(function(){f.onreadystatechange=v;f.abort();A(null,"timeout",f,b)},b.timeout));f.send(b.data?b.data:null);return f};l.active=0;l.JSONP=function(a){if(!("type"in a))return l(a);var c="jsonp"+ ++W,b=w.createElement("script"),d={abort:function(){c in m&&(m[c]=v);x("abort",d,a)}},e,g=w.getElementsByTagName("head")[0]||w.documentElement;a.error&&(b.onerror=function(){d.abort();a.error()});
m[c]=function(b){clearTimeout(e);delete m[c];E(b,d,a)};F(a);b.src=a.url.replace(/=\?/,"="+c);g.insertBefore(b,g.firstChild);0<a.timeout&&(e=setTimeout(function(){d.abort();x("timeout",d,a)},a.timeout));return d};l.settings={type:"GET",beforeSend:v,success:v,error:v,complete:v,context:null,global:!0,xhr:function(){return new m.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,
timeout:0};l.get=function(a,c){return l({url:a,success:c})};l.post=function(a,c,b,d){"function"===type(c)&&(d=d||b,b=c,c=null);return l({type:"POST",url:a,data:c,success:b,dataType:d})};l.getJSON=function(a,c){return l({url:a,success:c,dataType:"json"})};var H=encodeURIComponent;p.ajax=function(){return l};h.append=h.appendChild=function(a,c){return function(b){b.elementData||(b=z(b));var c=b.elementData;q.forEach(function(a){c.current.matches(a.selector)&&-1===c.listeners.indexOf(a)&&(c.current.addEventListener(a.type,
a.listener,a.options),c.listeners.push(a))});a.current.appendChild(c.current)}};p.append=p.appendChild=function(){return function(a){a.elementData||(a=z(a));var c=a.elementData;q.forEach(function(a){c.current.matches(a.selector)&&-1===c.listeners.indexOf(a)&&(c.current.addEventListener(a.type,a.listener,a.options),c.listeners.push(a))});w.body.appendChild(c.current)}};h.clone=function(a,c){return function(b){var c=a.current.cloneNode(!0),e=L(c);!1!==b&&a.listeners.forEach(function(a){e.elementData.listeners.push(a);
e.elementData.current.addEventListener(a.type,a.listener,a.options)});return e}};h.on=h.addEventListener=function(a,c,b){if("delete"===b)a.listeners.forEach(function(b){a.current.removeEventListener(b.type,b.listener)}),a.listeners=[];else return new Proxy(function(b,c,g){c._listenerData=c._listenerData||{type:b,listener:c,options:g};-1===a.listeners.indexOf(c._listenerData)&&(a.current.addEventListener(b,c,g),a.listeners.push(c._listenerData))},{get:function(b,c){if("length"===c)return a.listeners.length;
if("number"===typeof c)return a.listeners[c].listener;var d=[];a.listeners.forEach(function(a){a.type===c&&d.push(a.listener)});return new Proxy(d,{deleteProperty:function(b,c){if("number"===typeof c){var e=d[c];if(e){d.splice(c,1);var f=a.listeners.indexOf(e);-1!==e&&a.listeners.splice(f,1);a.current.removeEventListener(e.type,e.listener)}}}})},deleteProperty:function(b,c){if("number"===typeof c){var d=a.listeners[c];d&&(a.listeners.splice(c,1),a.current.removeEventListener(d.type,d.listener))}else a.listeners=
a.listeners.filter(function(b){return b.type===c?(a.current.removeEventListener(b.type,b.listener),!1):!0})}})};u.on=u.addEventListener=function(a,c,b){if("delete"===b)a.listeners.forEach(function(b){a.wrappers.forEach(function(a){a=a.elementData;var c=a.listeners.indexOf(b);-1!==c&&(a.listeners.splice(c,1),a.current.removeEventListener(b.type,b.listener))})}),a.listeners=[];else return new Proxy(function(b,e,g){var d=e._listenerData=e._listenerData||{selector:a.selector,type:b,listener:e,options:g};
-1===a.listeners.indexOf(d)&&a.listeners.push(d);a.nodes.forEach(function(c,k){var f=a.wrappers[k].elementData;-1===f.listeners.indexOf(d)&&(c.addEventListener(b,e,g),f.listeners.push(d))});c&&!d.isRefrenceEvent&&(q.push(d),d.isRefrenceEvent=!0)},{get:function(b,c){if("length"===c)return a.listeners.length;if("number"===typeof c)return a.listeners[c].listener;var d=[];a.listeners.forEach(function(a){a.type===c&&d.push(a.listener)});return new Proxy(d,{deleteProperty:function(b,c){if("number"===typeof c){var e=
d[c];if(e){d.splice(c,1);var f=a.listeners.indexOf(e);-1!==e&&a.listeners.splice(f,1);e.isRefrenceEvent&&(f=q.indexOf(e),q.splice(f,1),e.isRefrenceEvent=!1);a.wrappers.forEach(function(a){a=a.elementData;var b=a.listeners.indexOf(e);-1!==b&&(a.current.removeEventListener(e.type,e.listener),a.listeners.splice(b,1))})}}}})},deleteProperty:function(b,c){if("number"===typeof c){var d=a.listeners[c];if(d){a.listeners.splice(c,1);if(d.isRefrenceEvent){var e=q.indexOf(d);q.splice(e,1);d.isRefrenceEvent=
!1}a.wrappers.forEach(function(a){a=a.elementData;var b=a.listeners.indexOf(d);-1!==b&&(a.current.removeEventListener(d.type,d.listener),a.listeners.splice(b,1))})}}else a.listeners=a.listeners.filter(function(b){if(b.type===c){if(b.isRefrenceEvent){var d=q.indexOf(b);q.splice(d,1);b.isRefrenceEvent=!1}elementData.current.removeEventListener(b.type,b.listener);a.wrappers.forEach(function(a){a=a.elementData;var c=a.listeners.indexOf(b);-1!==c&&(a.current.removeEventListener(b.type,b.listener),a.listeners.splice(c,
1))});return!1}return!0})}})};h.show=function(a){return function(){y(a)}};h.hide=function(a){return function(){B(a)}};h.toggle=function(a){return function(c){y(a,c)}};u.show=function(a){return function(){a.hideState=!1;a.wrappers.forEach(function(a){y(a.elementData)})}};u.hide=function(a){return function(){a.hideState=!0;a.wrappers.forEach(function(a){B(a.elementData)})}};u.toggle=function(a){return function(c){a.hideState=!a.hideState&&!0!==c||!1===c?!0:!1;a.wrappers.forEach(function(b){a.hideState?
B(b.elementData):y(b.elementData)})}};var L=function(){return new Proxy(function(a){if(a){if("string"===typeof a){var c=Array.from(w.querySelectorAll(a));return U(c,a)}if("object"===typeof a)return z(a)}},{get:function(a,c){var b=!1;"$"===c.charAt(0)&&(b=!0,c=c.substr(1));if(p[c])return p[c](b,"get");if(K[c])return K[c]},set:function(a,c,b){a=!1;"$"===c.charAt(0)&&(a=!0,c=c.substr(1));if(p[c])return p[c](a,"set",b)},deleteProperty:function(a,c){var b=!1;"$"===c.charAt(0)&&(b=!0,c=c.substr(1));if(p[c])return p[c](b,
"delete",value)}})}();m.AQuery=L;m.$||(m.$=m.AQuery)})(window);
